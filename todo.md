add threading to recv and send

currently the ip feild of the struct node is not being initialized fix that